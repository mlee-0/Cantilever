/BATCH  
! /COM,ANSYS RELEASE 2021 R1           BUILD 21.1      UP20201109       15:50:34  
/input,menust,tmp,''
! /GRA,POWER  
! /GST,ON 
! /PLO,INFO,3 
! /GRO,CURL,ON
! /CPLANE,1   
! /REPLOT,RESIZE  
WPSTYLE,,,,,,,,0
! /REPLOT,RESIZE  
!*  
/NOPR   
KEYW,PR_SET,1   
KEYW,PR_STRUC,1 
KEYW,PR_THERM,0 
KEYW,PR_FLUID,0 
KEYW,PR_ELMAG,0 
KEYW,MAGNOD,0   
KEYW,MAGEDG,0   
KEYW,MAGHFE,0   
KEYW,MAGELC,0   
KEYW,PR_MULTI,0 
/GO 
!*  
! /COM,   
! /COM,Preferences for GUI filtering have been set to display:
! /COM,  Structural   
!*  

!* Disable popups.
/UIS,MSGPOP,4

*DIM,samples,ARRAY,6,100
samples(1,1) = 72727.0,429.484025,1420.727211,73.18,2.727,1.687
samples(1,2) = 77273.0,1557.368636,-248.056306,350.95,3.071,1.111
samples(1,3) = 71717.0,-0.0,-1463.612245,270.0,2.101,1.586
samples(1,4) = 88384.0,-521.945303,1726.58784,106.82,2.081,1.424
samples(1,5) = 90909.0,950.542031,1593.284321,59.18,3.232,1.152
samples(1,6) = 84848.0,-1726.371819,-134.352637,184.45,3.576,1.515
samples(1,7) = 62121.0,1251.993543,199.41643,9.05,2.848,1.071
samples(1,8) = 50505.0,-618.861704,824.246402,126.9,3.313,1.293
samples(1,9) = 93434.0,-1858.616233,426.021362,167.09,2.323,1.0
samples(1,10) = 79798.0,-1201.062689,-1099.800151,222.48,2.424,1.768
samples(1,11) = 57576.0,-1174.855477,19.686735,179.04,2.667,1.525
samples(1,12) = 66667.0,-1360.55102,0.0,180.0,2.566,1.808
samples(1,13) = 89899.0,-1687.446441,720.105025,156.89,3.96,1.485
samples(1,14) = 62626.0,-1271.425565,-130.267775,185.85,2.202,1.899
samples(1,15) = 80808.0,1648.118053,58.129561,2.02,2.465,1.869
samples(1,16) = 94444.0,-294.869272,-1904.739617,261.2,3.273,1.798
samples(1,17) = 95455.0,1436.720706,-1315.589657,317.52,4.0,1.303
samples(1,18) = 58081.0,1144.292469,309.182358,15.12,2.545,1.242
samples(1,19) = 61111.0,1240.668216,127.116437,5.85,2.747,1.737
samples(1,20) = 78788.0,-823.805185,-1380.849917,239.18,2.889,1.677
samples(1,21) = 68182.0,-1305.884312,480.471874,159.8,2.0,1.091
samples(1,22) = 77778.0,953.0507,1269.344354,53.1,2.929,1.828
samples(1,23) = 53030.0,-798.169808,730.875486,137.52,3.879,1.747
samples(1,24) = 96970.0,1717.118443,-983.801035,330.19,2.162,1.101
samples(1,25) = 72222.0,-1473.002451,-51.953187,182.02,2.97,1.859
samples(1,26) = 60101.0,-1216.390345,-157.54978,187.38,3.333,1.879
samples(1,27) = 97475.0,1989.285714,0.0,0.0,2.444,1.414
samples(1,28) = 100000.0,1877.046954,801.015612,23.11,2.828,1.141
samples(1,29) = 73232.0,1339.71082,-662.417292,333.69,2.182,1.636
samples(1,30) = 82828.0,0.0,1690.367347,90.0,3.01,1.788
samples(1,31) = 98485.0,1940.318586,-524.264811,344.88,3.131,1.192
samples(1,32) = 67172.0,-1228.848799,-607.601791,206.31,3.657,1.909
samples(1,33) = 96465.0,301.179157,-1945.498996,278.8,2.303,1.778
samples(1,34) = 54040.0,918.060193,-611.113214,326.35,3.051,1.313
samples(1,35) = 76768.0,-1236.924783,961.53356,142.14,3.172,1.939
samples(1,36) = 52020.0,976.439826,-416.688321,336.89,3.495,1.626
samples(1,37) = 81818.0,1389.967595,925.24169,33.65,2.485,1.657
samples(1,38) = 98990.0,-1926.278301,-608.832028,197.54,2.606,1.253
samples(1,39) = 85859.0,1670.757942,528.070604,17.54,3.192,1.596
samples(1,40) = 97980.0,578.613785,-1914.046395,286.82,3.737,1.465
samples(1,41) = 81313.0,1645.702204,-213.155276,352.62,2.586,1.838
samples(1,42) = 52525.0,549.199971,-920.560769,300.82,2.626,1.576
samples(1,43) = 65657.0,-1115.415952,742.484462,146.35,3.556,1.354
samples(1,44) = 70707.0,1435.485061,-147.07699,354.15,2.263,1.333
samples(1,45) = 74747.0,1523.100076,84.621201,3.18,3.354,1.222
samples(1,46) = 84343.0,1161.997515,-1269.876484,312.46,3.475,1.283
samples(1,47) = 89394.0,1739.546646,-549.812408,342.46,3.677,1.404
samples(1,48) = 50000.0,805.625249,-626.259353,322.14,3.616,1.364
samples(1,49) = 54545.0,-455.247753,1015.815898,114.14,2.222,1.929
samples(1,50) = 76263.0,-1460.659049,-537.417889,200.2,3.152,1.455
samples(1,51) = 51010.0,425.743659,-949.982014,294.14,3.778,1.182
samples(1,52) = 93939.0,-1663.446318,-953.050278,209.81,2.707,1.475
samples(1,53) = 64646.0,-1182.637996,584.752953,153.69,3.596,1.081
samples(1,54) = 63131.0,-1243.785882,-336.065003,195.12,2.141,1.434
samples(1,55) = 99495.0,2030.225193,34.019933,0.96,2.04,1.545
samples(1,56) = 75758.0,-1043.721563,1140.619882,132.46,2.121,1.061
samples(1,57) = 82323.0,-1637.592998,-375.359683,192.91,2.283,1.646
samples(1,58) = 73737.0,-1502.51957,-83.477778,183.18,3.212,1.727
samples(1,59) = 56566.0,911.419957,708.499731,37.86,3.859,1.04
samples(1,60) = 63636.0,-531.123769,-1185.121652,245.86,3.818,1.02
samples(1,61) = 57071.0,1162.920846,-64.610172,356.82,3.03,1.535
samples(1,62) = 74242.0,909.722416,-1211.636498,306.9,2.949,1.343
samples(1,63) = 90404.0,-1781.109422,481.247256,164.88,2.869,1.374
samples(1,64) = 75253.0,1508.118806,-290.144938,349.11,3.636,1.121
samples(1,65) = 61616.0,192.375006,1242.666938,81.2,3.798,1.667
samples(1,66) = 55556.0,1105.136069,253.312957,12.91,2.505,1.162
samples(1,67) = 95960.0,1957.150386,-69.029213,357.98,2.909,1.848
samples(1,68) = 71212.0,-981.091105,-1072.17486,227.54,3.899,1.949
samples(1,69) = 58586.0,1174.101343,225.88377,10.89,2.99,1.96
samples(1,70) = 55051.0,-1033.333119,-440.967104,203.11,3.293,1.97
samples(1,71) = 87879.0,-274.372292,1772.337182,98.8,2.646,1.889
samples(1,72) = 66162.0,1267.195416,466.237131,20.2,3.717,1.606
samples(1,73) = 67677.0,-1379.036535,76.617242,176.82,2.768,1.273
samples(1,74) = 91919.0,1383.499352,1266.855437,42.48,2.687,1.818
samples(1,75) = 70202.0,1344.573208,-494.706616,339.8,2.343,1.263
samples(1,76) = 65152.0,-798.338337,-1063.286834,233.1,3.838,1.323
samples(1,77) = 69697.0,-728.749936,1221.519732,120.82,3.111,1.566
samples(1,78) = 53535.0,-1086.86117,111.357668,174.15,2.384,1.444
samples(1,79) = 51515.0,-1032.393928,-198.620872,190.89,3.455,1.758
samples(1,80) = 69192.0,-1386.652445,266.776189,169.11,3.515,1.99
samples(1,81) = 87374.0,1598.425459,790.338219,26.31,2.061,1.01
samples(1,82) = 88889.0,-1808.592597,140.751362,175.55,3.939,1.212
samples(1,83) = 79293.0,-1404.098925,804.460508,150.19,2.808,1.616
samples(1,84) = 91414.0,-539.838748,-1785.779109,253.18,3.98,1.03
samples(1,85) = 64141.0,1135.791421,650.737158,29.81,2.242,1.202
samples(1,86) = 94949.0,-1937.462705,-32.465537,180.96,3.535,2.0
samples(1,87) = 83333.0,-1699.616644,59.94593,177.98,2.788,1.232
samples(1,88) = 78283.0,1078.508608,1178.636529,47.54,3.758,1.495
samples(1,89) = 85354.0,-1727.48842,223.748422,172.62,3.919,1.172
samples(1,90) = 56061.0,467.900711,1044.049043,65.86,3.414,1.051
samples(1,91) = 86869.0,-1750.767487,-278.860705,189.05,3.697,1.98
samples(1,92) = 92424.0,-1570.14795,-1045.180009,213.65,2.404,1.556
samples(1,93) = 59596.0,1212.578434,94.367337,4.45,2.525,1.697
samples(1,94) = 80303.0,-1293.882488,-1005.810096,217.86,3.434,1.717
samples(1,95) = 92929.0,1896.244002,-31.774847,359.04,3.394,1.505
samples(1,96) = 68687.0,1390.163286,180.057266,7.38,3.091,1.394
samples(1,97) = 83838.0,-1689.680376,269.130804,170.95,2.364,1.131
samples(1,98) = 59091.0,-1149.870806,363.435633,162.46,3.253,1.919
samples(1,99) = 60606.0,1233.128541,-95.966622,355.55,2.02,1.707
samples(1,100) = 86364.0,1717.977742,-393.785013,347.09,3.374,1.384

*DO,i,1,100,1
/PREP7  
FLST,3,1,8  
FITEM,3,0,0,0   
K, ,P51X
FLST,3,1,8  
FITEM,3,samples(5,i,1),0,0   
K, ,P51X
FLST,3,1,8  
FITEM,3,samples(5,i,1),samples(6,i,1),0   
K, ,P51X
FLST,3,1,8  
FITEM,3,0,samples(6,i,1),0   
K, ,P51X
FLST,2,4,3  
FITEM,2,1   
FITEM,2,2   
FITEM,2,3   
FITEM,2,4   
A,P51X  

!*  Define element type.
ET,1,PLANE182   
!*  
KEYOPT,1,1,0
KEYOPT,1,3,3
KEYOPT,1,6,0
!*  Define thickness.
R,1,1,  
!*  Define material properties.
MPTEMP,,,,,,,,  
MPTEMP,1,0  
MPDATA,EX,1,,200e9  
MPDATA,PRXY,1,,0.3  

!*  Create the mesh.
FLST,5,2,4,ORDE,2   
FITEM,5,1   
FITEM,5,3   
CM,_Y,LINE  
LSEL, , , ,P51X 
CM,_Y1,LINE 
CMSEL,,_Y   
!*  
LESIZE,_Y1, , ,99, , , , ,1
!*  
FLST,5,2,4,ORDE,2   
FITEM,5,2   
FITEM,5,4   
CM,_Y,LINE  
LSEL, , , ,P51X 
CM,_Y1,LINE 
CMSEL,,_Y   
!*  
LESIZE,_Y1, , ,49, , , , ,1
!*  
MSHAPE,0,2D 
MSHKEY,0
!*  
CM,_Y,AREA  
ASEL, , , ,       1 
CM,_Y1,AREA 
CHKMSH,'AREA'   
CMSEL,S,_Y  
!*  
AMESH,_Y1   
!*  
CMDELE,_Y   
CMDELE,_Y1  
CMDELE,_Y2  

! NPLOT   
! /PNUM,KP,0  
! /PNUM,LINE,0
! /PNUM,AREA,0
! /PNUM,VOLU,0
! /PNUM,NODE,1
! /PNUM,TABN,0
! /PNUM,SVAL,0
! /NUMBER,0   
!*  
! /PNUM,ELEM,0
! /REPLOT 
!*  
! /REPLOT,RESIZE  

!*  Apply displacement boundary condition.
FINISH  
/SOL
FLST,2,1,4,ORDE,1   
FITEM,2,4   
!*  
/GO 
DL,P51X, ,ALL,0 

!* Apply X and Y components of load on free end.
FLST,2,48,1,ORDE,2  
FITEM,2,102 
FITEM,2,-149
!*  
/GO 
F,P51X,FX,samples(2,i,1)  

FLST,2,2,1,ORDE,2   
FITEM,2,2   
FITEM,2,101 
!*  
/GO 
F,P51X,FX,samples(2,i,1)/2

FLST,2,48,1,ORDE,2  
FITEM,2,102 
FITEM,2,-149
!*  
/GO 
F,P51X,FY,samples(3,i,1) 

FLST,2,2,1,ORDE,2   
FITEM,2,2   
FITEM,2,101 
!*  
/GO 
F,P51X,FY,samples(3,i,1)/2


FINISH  
/SOL
! /STATUS,SOLU
SOLVE   
FINISH  
/POST1  
/SHOW,WIN32C
SET,FIRST   
/PLOPTS,INFO,3  
/CONTOUR,ALL,18 
/PNUM,MAT,1 
/NUMBER,1   
/REPLOT,RESIZE  
PLNSOL,S,EQV
/UIS,ABORT,1  
/SHOW,WIN32 
/REPLOT,RESIZE  
!*  
! /DSCALE,ALL,OFF 
! /EFACET,1   
! PLNSOL, S,EQV, 0,1.0
! /EFACET,1   
! PLNSOL, S,EQV, 0,1.0
! /triad,off  
! /REPLOT 
FINISH  

/POST1  
! /SHOW,WIN32C
SET,FIRST   
/DSCALE,ALL,OFF
/PLOPTS,INFO,3  
/PLOPTS,LEG1,0  
/PLOPTS,LEG2,1  
/PLOPTS,LEG3,0  
/PLOPTS,FRAME,0 
/PLOPTS,TITLE,0 
/PLOPTS,MINM,0  
/PLOPTS,FILE,0  
/PLOPTS,SPNO,0  
/PLOPTS,LOGO,1  
/PLOPTS,WINS,1  
/PLOPTS,WP,0
/PLOPTS,DATE,0  
/TRIAD,OFF  
/REPLOT
/REPLOT
!*  

*VGET,stress,NODE,,S,EQV
suffix = '000000'
number = CHRVAL(i)
filename = 'fea_%STRFILL(suffix,number,6-STRLENG(number)+1)%'
*CFOPEN,filename,'txt'
*VWRITE,stress(1)
(F20.5)
*CFCLOS

*ENDDO
