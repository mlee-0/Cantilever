/BATCH  
! /COM,ANSYS RELEASE 2021 R1           BUILD 21.1      UP20201109       15:50:34  
/input,menust,tmp,''
! /GRA,POWER  
! /GST,ON 
! /PLO,INFO,3 
! /GRO,CURL,ON
! /CPLANE,1   
! /REPLOT,RESIZE  
WPSTYLE,,,,,,,,0
! /REPLOT,RESIZE  
!*  
/NOPR   
KEYW,PR_SET,1   
KEYW,PR_STRUC,1 
KEYW,PR_THERM,0 
KEYW,PR_FLUID,0 
KEYW,PR_ELMAG,0 
KEYW,MAGNOD,0   
KEYW,MAGEDG,0   
KEYW,MAGHFE,0   
KEYW,MAGELC,0   
KEYW,PR_MULTI,0 
/GO 
!*  
! /COM,   
! /COM,Preferences for GUI filtering have been set to display:
! /COM,  Structural   
!*  

!* Disable popups.
/UIS,MSGPOP,4

*DIM,samples,ARRAY,6,100
samples(1,1) = 60606.0,441.435605,1155.40045,69.09,2.788,1.859
samples(1,2) = 77778.0,-422.854142,-1529.946111,254.55,2.889,1.525
samples(1,3) = 88384.0,-28.646929,-1803.527605,269.09,2.263,1.97
samples(1,4) = 98990.0,-2019.184959,-64.160976,181.82,3.636,1.101
samples(1,5) = 95455.0,459.392991,1893.119282,76.36,2.99,1.394
samples(1,6) = 100000.0,1183.657724,1662.493811,54.55,2.606,1.131
samples(1,7) = 85354.0,-1298.152976,-1161.498364,221.82,3.394,1.545
samples(1,8) = 94444.0,1621.406492,-1042.123738,327.27,2.444,1.374
samples(1,9) = 96465.0,1141.815424,-1603.724654,305.45,4.0,1.434
samples(1,10) = 55051.0,-434.104132,-1036.234976,247.27,2.404,1.838
samples(1,11) = 70202.0,1421.176219,-181.300586,352.73,3.717,1.071
samples(1,12) = 73232.0,705.781774,1317.381432,61.82,2.121,1.677
samples(1,13) = 56061.0,-1075.104245,391.305944,160.0,3.273,1.263
samples(1,14) = 98485.0,-1004.94898,1740.622692,120.0,3.455,1.949
samples(1,15) = 68687.0,-111.201506,1397.357795,94.55,3.838,1.152
samples(1,16) = 84343.0,1721.285714,0.0,0.0,3.333,1.747
samples(1,17) = 70707.0,159.848504,1434.119052,83.64,3.515,1.343
samples(1,18) = 61111.0,-1196.666688,351.290548,163.64,3.111,1.091
samples(1,19) = 71212.0,1349.18566,-540.182137,338.18,2.101,1.303
samples(1,20) = 76263.0,1360.060477,756.689067,29.09,3.293,1.162
samples(1,21) = 62121.0,220.146907,1248.515152,80.0,2.02,1.192
samples(1,22) = 58586.0,-391.035209,1129.880041,109.09,2.343,1.111
samples(1,23) = 94949.0,1933.825603,-123.021463,356.36,3.01,1.737
samples(1,24) = 80808.0,1596.252824,-414.305546,345.45,2.687,1.768
samples(1,25) = 57576.0,55.96559,-1173.686846,272.73,3.798,1.051
samples(1,26) = 96970.0,94.257733,1976.733595,87.27,2.465,1.384
samples(1,27) = 63131.0,-1287.737809,40.918745,178.18,2.949,1.212
samples(1,28) = 74242.0,-1062.920329,-1079.749162,225.45,2.929,1.141
samples(1,29) = 99495.0,724.69121,-1896.785264,290.91,3.697,1.626
samples(1,30) = 83838.0,-455.800426,1649.150428,105.45,3.859,2.0
samples(1,31) = 89899.0,762.283298,-1668.81722,294.55,3.232,1.424
samples(1,32) = 61616.0,-761.488011,1000.682402,127.27,2.646,1.444
samples(1,33) = 56566.0,1042.385125,-496.076061,334.55,2.0,1.02
samples(1,34) = 54040.0,-1089.006796,-174.235689,189.09,2.182,1.646
samples(1,35) = 68182.0,-197.983034,-1377.312519,261.82,3.556,1.657
samples(1,36) = 75758.0,1049.084999,1135.688813,47.27,3.212,1.414
samples(1,37) = 62626.0,1116.860698,-621.381398,330.91,3.778,1.707
samples(1,38) = 74747.0,1416.159924,566.997053,21.82,2.808,1.283
samples(1,39) = 95960.0,-401.147519,-1916.842021,258.18,2.727,1.879
samples(1,40) = 83333.0,1302.791461,-1093.171834,320.0,2.04,1.566
samples(1,41) = 81818.0,-26.518764,1669.544506,90.91,2.848,1.172
samples(1,42) = 50505.0,-624.171514,-820.232808,232.73,3.879,1.909
samples(1,43) = 82828.0,-1648.816933,-372.484215,192.73,2.97,1.535
samples(1,44) = 58081.0,-242.799594,1160.192803,101.82,3.758,1.828
samples(1,45) = 91919.0,-1667.405519,-859.50683,207.27,2.141,1.495
samples(1,46) = 73737.0,-833.638775,1252.828796,123.64,2.828,1.717
samples(1,47) = 53030.0,449.658876,984.408916,65.45,2.505,1.455
samples(1,48) = 64141.0,888.21459,-961.538269,312.73,2.667,1.586
samples(1,49) = 97475.0,-883.262245,-1782.443676,243.64,3.131,1.96
samples(1,50) = 67677.0,728.22169,1173.586441,58.18,3.596,1.293
samples(1,51) = 51515.0,1042.874746,133.040364,7.27,3.576,1.848
samples(1,52) = 93939.0,1543.873826,-1136.579119,323.64,3.535,1.364
samples(1,53) = 55556.0,-742.492023,-856.854002,229.09,3.354,1.01
samples(1,54) = 93434.0,-1248.722004,1441.055814,130.91,3.253,1.182
samples(1,55) = 54545.0,123.310799,-1106.312299,276.36,3.818,1.253
samples(1,56) = 66162.0,400.853848,1289.370962,72.73,2.909,1.727
samples(1,57) = 86869.0,1769.260301,112.552544,3.64,2.162,1.818
samples(1,58) = 76768.0,-605.353326,1445.018012,112.73,3.374,1.778
samples(1,59) = 75253.0,-1443.156914,-525.26616,200.0,3.071,1.697
samples(1,60) = 60101.0,-1176.889015,-345.484663,196.36,3.475,1.606
samples(1,61) = 87374.0,1610.107802,766.257995,25.45,2.566,1.939
samples(1,62) = 51010.0,-925.318547,476.979116,152.73,3.737,1.354
samples(1,63) = 97980.0,1447.085096,1379.968202,43.64,3.899,1.404
samples(1,64) = 92424.0,-1553.537271,-1069.71388,214.55,3.677,1.929
samples(1,65) = 53535.0,-1000.867427,-438.100588,203.64,2.222,1.556
samples(1,66) = 72727.0,1136.981923,954.041112,40.0,3.657,1.485
samples(1,67) = 59596.0,-1200.970559,192.149336,170.91,2.303,1.121
samples(1,68) = 79798.0,-1280.143473,-1006.65021,218.18,3.192,1.667
samples(1,69) = 81313.0,-542.727716,-1568.189256,250.91,3.939,1.03
samples(1,70) = 52525.0,-535.969388,-928.326211,240.0,2.525,1.788
samples(1,71) = 85859.0,-1305.833545,1168.370411,138.18,2.545,1.596
samples(1,72) = 78283.0,-1120.775196,1138.520024,134.55,3.414,1.899
samples(1,73) = 65657.0,-106.296057,-1335.715939,265.45,2.323,1.202
samples(1,74) = 87879.0,945.600336,-1523.909199,301.82,3.495,1.04
samples(1,75) = 50000.0,1020.408163,-0.0,360.0,2.202,1.576
samples(1,76) = 69192.0,-1211.53111,-725.373633,210.91,2.061,1.232
samples(1,77) = 65152.0,838.387041,-1032.002985,309.09,2.283,1.475
samples(1,78) = 89394.0,1150.337229,1415.994518,50.91,3.051,1.798
samples(1,79) = 67172.0,1103.962067,812.722007,36.36,3.616,1.273
samples(1,80) = 52020.0,-588.115723,-883.84602,236.36,2.707,1.869
samples(1,81) = 66667.0,-1120.592803,771.602779,145.45,2.081,1.465
samples(1,82) = 91414.0,1831.87256,353.094642,10.91,2.626,1.333
samples(1,83) = 77273.0,-1444.662907,632.359143,156.36,2.586,1.515
samples(1,84) = 84848.0,-1361.157089,1070.355861,141.82,2.242,1.919
samples(1,85) = 82323.0,-239.04487,1662.96821,98.18,3.313,1.081
samples(1,86) = 64646.0,1109.836984,713.323569,32.73,2.747,1.061
samples(1,87) = 88889.0,538.549284,-1732.276766,287.27,2.485,1.616
samples(1,88) = 90909.0,1342.652163,-1280.378948,316.36,3.03,1.222
samples(1,89) = 59091.0,-1034.665638,619.479901,149.09,3.091,1.687
samples(1,90) = 78788.0,759.328359,-1417.32915,298.18,2.424,1.99
samples(1,91) = 63636.0,1233.864403,405.196771,18.18,2.364,1.889
samples(1,92) = 90404.0,435.084217,-1792.944901,283.64,3.919,1.505
samples(1,93) = 72222.0,255.943239,-1451.526235,280.0,2.384,1.98
samples(1,94) = 57071.0,-1136.084792,256.652903,167.27,2.768,1.0
samples(1,95) = 86364.0,1706.004095,442.79136,14.55,3.434,1.636
samples(1,96) = 80303.0,-1631.428309,155.65191,174.55,2.869,1.242
samples(1,97) = 71717.0,1437.15847,-277.013242,349.09,3.96,1.323
samples(1,98) = 92929.0,-842.069014,1699.314782,116.36,3.172,1.758
samples(1,99) = 69697.0,1351.383608,-443.789669,341.82,3.98,1.313
samples(1,100) = 79293.0,-1610.909242,-153.694219,185.45,3.152,1.808

*DO,i,1,100,1
/PREP7  
FLST,3,1,8  
FITEM,3,0,0,0   
K, ,P51X
FLST,3,1,8  
FITEM,3,samples(5,i,1),0,0   
K, ,P51X
FLST,3,1,8  
FITEM,3,samples(5,i,1),samples(6,i,1),0   
K, ,P51X
FLST,3,1,8  
FITEM,3,0,samples(6,i,1),0   
K, ,P51X
FLST,2,4,3  
FITEM,2,1   
FITEM,2,2   
FITEM,2,3   
FITEM,2,4   
A,P51X  

!*  Define element type.
ET,1,PLANE182   
!*  
KEYOPT,1,1,0
KEYOPT,1,3,3
KEYOPT,1,6,0
!*  Define thickness.
R,1,1,  
!*  Define material properties.
MPTEMP,,,,,,,,  
MPTEMP,1,0  
MPDATA,EX,1,,200e9  
MPDATA,PRXY,1,,0.3  

!*  Create the mesh.
FLST,5,2,4,ORDE,2   
FITEM,5,1   
FITEM,5,3   
CM,_Y,LINE  
LSEL, , , ,P51X 
CM,_Y1,LINE 
CMSEL,,_Y   
!*  
LESIZE,_Y1, , ,99, , , , ,1
!*  
FLST,5,2,4,ORDE,2   
FITEM,5,2   
FITEM,5,4   
CM,_Y,LINE  
LSEL, , , ,P51X 
CM,_Y1,LINE 
CMSEL,,_Y   
!*  
LESIZE,_Y1, , ,49, , , , ,1
!*  
MSHAPE,0,2D 
MSHKEY,0
!*  
CM,_Y,AREA  
ASEL, , , ,       1 
CM,_Y1,AREA 
CHKMSH,'AREA'   
CMSEL,S,_Y  
!*  
AMESH,_Y1   
!*  
CMDELE,_Y   
CMDELE,_Y1  
CMDELE,_Y2  

! NPLOT   
! /PNUM,KP,0  
! /PNUM,LINE,0
! /PNUM,AREA,0
! /PNUM,VOLU,0
! /PNUM,NODE,1
! /PNUM,TABN,0
! /PNUM,SVAL,0
! /NUMBER,0   
!*  
! /PNUM,ELEM,0
! /REPLOT 
!*  
! /REPLOT,RESIZE  

!*  Apply displacement boundary condition.
FINISH  
/SOL
FLST,2,1,4,ORDE,1   
FITEM,2,4   
!*  
/GO 
DL,P51X, ,ALL,0 

!* Apply X and Y components of load on free end.
FLST,2,48,1,ORDE,2  
FITEM,2,102 
FITEM,2,-149
!*  
/GO 
F,P51X,FX,samples(2,i,1)  

FLST,2,2,1,ORDE,2   
FITEM,2,2   
FITEM,2,101 
!*  
/GO 
F,P51X,FX,samples(2,i,1)/2

FLST,2,48,1,ORDE,2  
FITEM,2,102 
FITEM,2,-149
!*  
/GO 
F,P51X,FY,samples(3,i,1) 

FLST,2,2,1,ORDE,2   
FITEM,2,2   
FITEM,2,101 
!*  
/GO 
F,P51X,FY,samples(3,i,1)/2


FINISH  
/SOL
! /STATUS,SOLU
SOLVE   
FINISH  
/POST1  
/SHOW,WIN32C
SET,FIRST   
/PLOPTS,INFO,3  
/CONTOUR,ALL,18 
/PNUM,MAT,1 
/NUMBER,1   
/REPLOT,RESIZE  
PLNSOL,S,EQV
/UIS,ABORT,1  
/SHOW,WIN32 
/REPLOT,RESIZE  
!*  
! /DSCALE,ALL,OFF 
! /EFACET,1   
! PLNSOL, S,EQV, 0,1.0
! /EFACET,1   
! PLNSOL, S,EQV, 0,1.0
! /triad,off  
! /REPLOT 
FINISH  

/POST1  
! /SHOW,WIN32C
SET,FIRST   
/DSCALE,ALL,OFF
/PLOPTS,INFO,3  
/PLOPTS,LEG1,0  
/PLOPTS,LEG2,1  
/PLOPTS,LEG3,0  
/PLOPTS,FRAME,0 
/PLOPTS,TITLE,0 
/PLOPTS,MINM,0  
/PLOPTS,FILE,0  
/PLOPTS,SPNO,0  
/PLOPTS,LOGO,1  
/PLOPTS,WINS,1  
/PLOPTS,WP,0
/PLOPTS,DATE,0  
/TRIAD,OFF  
/REPLOT
/REPLOT
!*  

*VGET,stress,NODE,,S,EQV
suffix = '000000'
number = CHRVAL(i)
filename = 'fea_%STRFILL(suffix,number,6-STRLENG(number)+1)%'
*CFOPEN,filename,'txt'
*VWRITE,stress(1)
(F20.5)
*CFCLOS

*ENDDO
