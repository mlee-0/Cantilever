/BATCH  
! /COM,ANSYS RELEASE 2021 R1           BUILD 21.1      UP20201109       15:50:34  
/input,menust,tmp,''
! /GRA,POWER  
! /GST,ON 
! /PLO,INFO,3 
! /GRO,CURL,ON
! /CPLANE,1   
! /REPLOT,RESIZE  
WPSTYLE,,,,,,,,0
! /REPLOT,RESIZE  
!*  
/NOPR   
KEYW,PR_SET,1   
KEYW,PR_STRUC,1 
KEYW,PR_THERM,0 
KEYW,PR_FLUID,0 
KEYW,PR_ELMAG,0 
KEYW,MAGNOD,0   
KEYW,MAGEDG,0   
KEYW,MAGHFE,0   
KEYW,MAGELC,0   
KEYW,PR_MULTI,0 
/GO 
!*  
! /COM,   
! /COM,Preferences for GUI filtering have been set to display:
! /COM,  Structural   
!*  

!* Disable popups.
/UIS,MSGPOP,4

*DIM,samples,ARRAY,6,100
samples(1,1) = 57273.0,-178.81546533664766,-1155.0776345018044,261.2,2.465,1.111
samples(1,2) = 11818.0,36.89768598377066,-238.34455126398694,278.8,3.98,1.313
samples(1,3) = 58182.0,-1030.2710659197892,-590.2806211411363,209.81,3.657,1.909
samples(1,4) = 70000.0,1402.8452873157094,269.89150854874447,10.89,3.939,1.202
samples(1,5) = 99091.0,1985.8477480771564,-382.0545639086233,349.11,2.121,1.374
samples(1,6) = 16364.0,-325.5174351794212,-74.61324114432617,192.91,3.96,1.586
samples(1,7) = 43636.0,364.198202212989,812.652718478256,65.86,2.747,1.465
samples(1,8) = 81818.0,1002.5547346063914,1335.2775385325874,53.1,3.455,1.556
samples(1,9) = 91818.0,-1559.8529007366599,1038.3270372823972,146.35,2.424,1.737
samples(1,10) = 54545.0,1044.6959576820404,-384.3732707015316,339.8,3.838,1.354
samples(1,11) = 66364.0,-1214.0671958736402,-600.2930570625432,206.31,2.444,1.727
samples(1,12) = 63636.0,1025.3353674999726,-797.052803609774,322.14,3.01,1.606
samples(1,13) = 85455.0,1.0678795124605824e-13,1743.9795918367347,90.0,2.808,1.919
samples(1,14) = 44545.0,908.9540299340342,15.23109627813826,0.96,3.051,1.303
samples(1,15) = 65455.0,684.3956996719935,-1147.173824882795,300.82,2.182,1.495
samples(1,16) = 18182.0,366.4420501741061,58.36656734865124,9.05,2.707,1.545
samples(1,17) = 78182.0,-1595.5510204081634,1.9539864500191504e-13,180.0,2.626,1.141
samples(1,18) = 45455.0,-853.2116930406802,364.1016463267136,156.89,3.677,1.414
samples(1,19) = 40000.0,816.3265306122449,0.0,0.0,2.081,1.152
samples(1,20) = 64545.0,-1293.5235581398924,248.85924884683854,169.11,2.343,1.505
samples(1,21) = 10000.0,-203.01880444116867,-20.800909345928527,185.85,3.232,1.455
samples(1,22) = 59091.0,1109.1658157181132,-473.3281351466685,336.89,3.253,1.646
samples(1,23) = 62727.0,370.42974999032555,-1225.3764870504012,286.82,2.909,1.424
samples(1,24) = 22727.0,-459.9740999618931,59.5769428604548,172.62,2.97,1.525
samples(1,25) = 32727.0,-273.1486516597415,-609.4895388586921,245.86,3.576,1.444
samples(1,26) = 38182.0,574.6882825912203,526.23586285055,42.48,4.0,1.182
samples(1,27) = 72727.0,-2.726476155967027e-13,-1484.2244897959183,270.0,3.859,1.222
samples(1,28) = 15455.0,273.6729456496913,156.79741156605587,29.81,3.596,1.253
samples(1,29) = 35455.0,602.3283516915885,400.9440970925896,33.65,2.242,1.818
samples(1,30) = 90000.0,1646.465668564698,814.0916029116518,26.31,3.434,1.061
samples(1,31) = 69091.0,1374.3782152274132,315.02709874741123,12.91,3.131,1.384
samples(1,32) = 70909.0,1397.0254413883392,377.46959937776126,15.12,3.879,1.96
samples(1,33) = 53636.0,1056.718562866561,-285.520306762549,344.88,2.869,1.02
samples(1,34) = 47273.0,-761.6864483598308,592.1031677830923,142.14,2.545,1.939
samples(1,35) = 12727.0,-175.34048323098295,191.61896081544364,132.46,3.556,1.747
samples(1,36) = 60909.0,508.36346820494344,-1134.3355126453412,294.14,3.899,1.283
samples(1,37) = 61818.0,1257.78867050058,97.8857644195583,4.45,2.788,1.263
samples(1,38) = 95455.0,-1828.2418670921109,-672.6620323552061,200.2,2.141,1.828
samples(1,39) = 94545.0,1913.5060184316974,247.84186486301294,7.38,3.111,1.0
samples(1,40) = 26364.0,-220.0412824993867,490.9885477578316,114.14,3.758,1.323
samples(1,41) = 82727.0,1552.8246338175418,662.6561851428888,23.11,2.162,1.687
samples(1,42) = 10909.0,185.3278800903551,-123.36480482817825,326.35,2.101,1.616
samples(1,43) = 31818.0,648.3470670437755,36.02120976397509,3.18,2.768,1.293
samples(1,44) = 24545.0,477.6290625469401,150.96254289079104,17.54,2.525,1.131
samples(1,45) = 77273.0,-1563.9362267943577,-202.56475142587738,187.38,3.697,1.485
samples(1,46) = 87273.0,-1778.3391030898053,98.80190583102049,176.82,3.091,1.848
samples(1,47) = 14545.0,-296.79506937682186,-4.973314521619109,180.96,3.798,1.768
samples(1,48) = 51818.0,1044.3457351183495,-166.34246985328417,350.95,2.889,1.677
samples(1,49) = 23636.0,-465.66857990741346,125.82142536057157,164.88,2.667,1.394
samples(1,50) = 29091.0,-532.1925862690626,263.14154244780957,153.69,2.687,1.717
samples(1,51) = 80909.0,252.61083730418855,1631.7667370297784,81.2,3.03,1.232
samples(1,52) = 20000.0,-62.44319848328082,403.35852303940925,98.8,2.586,1.758
samples(1,53) = 37273.0,-633.2135002848844,-421.50301314150596,213.65,2.222,1.788
samples(1,54) = 88182.0,-1767.2243303724842,-339.99390009779046,190.89,2.606,1.657
samples(1,55) = 75455.0,-445.59403104755506,1474.018888682514,106.82,3.778,1.051
samples(1,56) = 28182.0,-548.4026172620845,-173.33169214700638,197.54,3.071,1.596
samples(1,57) = 40909.0,830.5296270883769,85.0944400432592,5.85,3.394,1.808
samples(1,58) = 41818.0,852.8982371830276,-30.081947089508382,357.98,2.323,1.869
samples(1,59) = 13636.0,277.8572068077479,-15.43733786980851,356.82,2.061,1.576
samples(1,60) = 93636.0,-552.9606081925497,-1829.1860401653416,253.18,2.929,1.949
samples(1,61) = 97273.0,-1464.0839482608505,1340.6458825378854,137.52,2.04,1.091
samples(1,62) = 34545.0,704.9010430816301,-11.811835692631925,359.04,3.273,1.566
samples(1,63) = 17273.0,278.31129868041717,216.34755604927437,37.86,2.505,1.434
samples(1,64) = 96364.0,1950.3209472753933,-252.61022228208176,352.62,3.192,1.899
samples(1,65) = 92727.0,-1804.4045664204568,570.3118237781368,162.46,2.364,1.98
samples(1,66) = 20909.0,-288.0642856821422,-314.80795566041564,227.54,2.404,1.535
samples(1,67) = 36364.0,-742.0182813900825,12.433799193135782,179.04,3.495,1.121
samples(1,68) = 21818.0,-228.1284145663975,382.38543291257855,120.82,3.414,1.879
samples(1,69) = 30000.0,451.5386432805145,-413.46906619654567,317.52,2.263,1.01
samples(1,70) = 76364.0,1462.5934936736883,538.1296258841653,20.2,2.202,1.626
samples(1,71) = 100000.0,-1225.3473986242532,-1632.0095071165113,233.1,2.99,1.707
samples(1,72) = 68182.0,-1389.3267875158306,-77.18895355230838,183.18,3.333,1.212
samples(1,73) = 39091.0,692.2128190483393,-396.59447528493615,330.19,3.636,1.101
samples(1,74) = 84545.0,-1362.2317343215345,-1058.9419398011871,217.86,3.919,1.404
samples(1,75) = 56364.0,-1079.5351170371348,397.19158547660004,159.8,3.313,1.333
samples(1,76) = 50909.0,1038.3135577203777,36.621594633406424,2.02,3.818,1.172
samples(1,77) = 55455.0,-834.6691821040314,-764.2975688643144,222.48,3.374,1.04
samples(1,78) = 48182.0,-978.1852035584388,100.22294141055306,174.15,2.828,1.99
samples(1,79) = 80000.0,-1416.6182887075574,811.633317714945,150.19,3.737,2.0
samples(1,80) = 90909.0,-1791.058763361104,-483.9355203124129,195.12,3.212,1.242
samples(1,81) = 60000.0,1220.7984766578475,-95.00705078089693,355.55,2.727,1.071
samples(1,82) = 50000.0,1015.0940222058434,-104.00454672964301,354.15,2.283,1.929
samples(1,83) = 67273.0,1230.6964991261439,-608.5153822519508,333.69,2.646,1.475
samples(1,84) = 30909.0,-622.9434236514929,-99.2218804410661,189.05,2.848,1.778
samples(1,85) = 98182.0,-1203.0705829172646,1602.3395742771331,126.9,2.566,1.97
samples(1,86) = 25455.0,-513.0229010659923,81.71383631393232,170.95,3.475,1.03
samples(1,87) = 33636.0,-351.69710112546267,-589.509415228137,239.18,2.303,1.343
samples(1,88) = 49091.0,976.5324132481646,-223.8351638362333,347.09,3.293,1.838
samples(1,89) = 86364.0,-1621.0928315425213,-691.7891229426967,203.11,3.717,1.798
samples(1,90) = 79091.0,826.9733447827921,1386.1603389168915,59.18,3.616,1.081
samples(1,91) = 42727.0,588.651907520249,643.3019045149258,47.54,2.0,1.859
samples(1,92) = 52727.0,726.4223822833375,-793.8628857480867,312.46,2.485,1.162
samples(1,93) = 74545.0,-1516.7403740409875,-118.03834334103283,184.45,2.949,1.192
samples(1,94) = 46364.0,-922.2861381482943,211.40114351109358,167.09,3.515,1.515
samples(1,95) = 71818.0,-1464.7626763118917,-51.66256817816054,182.02,3.535,1.364
samples(1,96) = 83636.0,-1701.7116898959289,132.43349498518475,175.55,2.384,1.273
samples(1,97) = 73636.0,434.8520584483172,1438.484591969062,73.18,3.152,1.889
samples(1,98) = 19091.0,371.4979194574712,-117.41804466604597,342.46,3.172,1.667
samples(1,99) = 27273.0,334.1889960267924,-445.0979528758862,306.9,2.02,1.697
samples(1,100) = 89091.0,-1817.0538248809871,64.08797044697059,177.98,3.354,1.636

*DO,i,1,100,1
/PREP7  
FLST,3,1,8  
FITEM,3,0,0,0   
K, ,P51X
FLST,3,1,8  
FITEM,3,samples(5,i,1),0,0   
K, ,P51X
FLST,3,1,8  
FITEM,3,samples(5,i,1),samples(6,i,1),0   
K, ,P51X
FLST,3,1,8  
FITEM,3,0,samples(6,i,1),0   
K, ,P51X
FLST,2,4,3  
FITEM,2,1   
FITEM,2,2   
FITEM,2,3   
FITEM,2,4   
A,P51X  

!*  Define element type.
ET,1,PLANE182   
!*  
KEYOPT,1,1,0
KEYOPT,1,3,3
KEYOPT,1,6,0
!*  Define thickness.
R,1,1,  
!*  Define material properties.
MPTEMP,,,,,,,,  
MPTEMP,1,0  
MPDATA,EX,1,,200e9  
MPDATA,PRXY,1,,0.3  

!*  Create the mesh.
FLST,5,2,4,ORDE,2   
FITEM,5,1   
FITEM,5,3   
CM,_Y,LINE  
LSEL, , , ,P51X 
CM,_Y1,LINE 
CMSEL,,_Y   
!*  
LESIZE,_Y1, , ,99, , , , ,1
!*  
FLST,5,2,4,ORDE,2   
FITEM,5,2   
FITEM,5,4   
CM,_Y,LINE  
LSEL, , , ,P51X 
CM,_Y1,LINE 
CMSEL,,_Y   
!*  
LESIZE,_Y1, , ,49, , , , ,1
!*  
MSHAPE,0,2D 
MSHKEY,0
!*  
CM,_Y,AREA  
ASEL, , , ,       1 
CM,_Y1,AREA 
CHKMSH,'AREA'   
CMSEL,S,_Y  
!*  
AMESH,_Y1   
!*  
CMDELE,_Y   
CMDELE,_Y1  
CMDELE,_Y2  

! NPLOT   
! /PNUM,KP,0  
! /PNUM,LINE,0
! /PNUM,AREA,0
! /PNUM,VOLU,0
! /PNUM,NODE,1
! /PNUM,TABN,0
! /PNUM,SVAL,0
! /NUMBER,0   
!*  
! /PNUM,ELEM,0
! /REPLOT 
!*  
! /REPLOT,RESIZE  

!*  Apply displacement boundary condition.
FINISH  
/SOL
FLST,2,1,4,ORDE,1   
FITEM,2,4   
!*  
/GO 
DL,P51X, ,ALL,0 

!* Apply X and Y components of load on free end.
FLST,2,48,1,ORDE,2  
FITEM,2,102 
FITEM,2,-149
!*  
/GO 
F,P51X,FX,samples(2,i,1)  

FLST,2,2,1,ORDE,2   
FITEM,2,2   
FITEM,2,101 
!*  
/GO 
F,P51X,FX,samples(2,i,1)/2

FLST,2,48,1,ORDE,2  
FITEM,2,102 
FITEM,2,-149
!*  
/GO 
F,P51X,FY,samples(3,i,1) 

FLST,2,2,1,ORDE,2   
FITEM,2,2   
FITEM,2,101 
!*  
/GO 
F,P51X,FY,samples(3,i,1)/2


FINISH  
/SOL
! /STATUS,SOLU
SOLVE   
FINISH  
/POST1  
/SHOW,WIN32C
SET,FIRST   
/PLOPTS,INFO,3  
/CONTOUR,ALL,18 
/PNUM,MAT,1 
/NUMBER,1   
/REPLOT,RESIZE  
PLNSOL,S,EQV
/UIS,ABORT,1  
/SHOW,WIN32 
/REPLOT,RESIZE  
!*  
! /DSCALE,ALL,OFF 
! /EFACET,1   
! PLNSOL, S,EQV, 0,1.0
! /EFACET,1   
! PLNSOL, S,EQV, 0,1.0
! /triad,off  
! /REPLOT 
FINISH  

/POST1  
! /SHOW,WIN32C
SET,FIRST   
/DSCALE,ALL,OFF
/PLOPTS,INFO,3  
/PLOPTS,LEG1,0  
/PLOPTS,LEG2,1  
/PLOPTS,LEG3,0  
/PLOPTS,FRAME,0 
/PLOPTS,TITLE,0 
/PLOPTS,MINM,0  
/PLOPTS,FILE,0  
/PLOPTS,SPNO,0  
/PLOPTS,LOGO,1  
/PLOPTS,WINS,1  
/PLOPTS,WP,0
/PLOPTS,DATE,0  
/TRIAD,OFF  
/REPLOT
/REPLOT
!*  

*VGET,stress,NODE,,S,EQV
suffix = '000000'
number = CHRVAL(i)
filename = 'stress_%STRFILL(suffix,number,6-STRLENG(number)+1)%'
*CFOPEN,filename,'txt'
*VWRITE,stress(1)
(F20.5)
*CFCLOS

*ENDDO
