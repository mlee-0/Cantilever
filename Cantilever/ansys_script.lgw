/BATCH  
! /COM,ANSYS RELEASE 2021 R1           BUILD 21.1      UP20201109       15:50:34  
/input,menust,tmp,''
! /GRA,POWER  
! /GST,ON 
! /PLO,INFO,3 
! /GRO,CURL,ON
! /CPLANE,1   
! /REPLOT,RESIZE  
WPSTYLE,,,,,,,,0
! /REPLOT,RESIZE  
!*  
/NOPR   
KEYW,PR_SET,1   
KEYW,PR_STRUC,1 
KEYW,PR_THERM,0 
KEYW,PR_FLUID,0 
KEYW,PR_ELMAG,0 
KEYW,MAGNOD,0   
KEYW,MAGEDG,0   
KEYW,MAGHFE,0   
KEYW,MAGELC,0   
KEYW,PR_MULTI,0 
/GO 
!*  
! /COM,   
! /COM,Preferences for GUI filtering have been set to display:
! /COM,  Structural   
!*  

!* Disable popups.
/UIS,MSGPOP,4

*DIM,samples,ARRAY,6,100
samples(1,1) = 57273.0,-178.815465,-1155.077635,261.2,2.465,1.111
samples(1,2) = 11818.0,36.897686,-238.344551,278.8,3.98,1.313
samples(1,3) = 58182.0,-1030.271066,-590.280621,209.81,3.657,1.909
samples(1,4) = 70000.0,1402.845287,269.891509,10.89,3.939,1.202
samples(1,5) = 99091.0,1985.847748,-382.054564,349.11,2.121,1.374
samples(1,6) = 16364.0,-325.517435,-74.613241,192.91,3.96,1.586
samples(1,7) = 43636.0,364.198202,812.652718,65.86,2.747,1.465
samples(1,8) = 81818.0,1002.554735,1335.277539,53.1,3.455,1.556
samples(1,9) = 91818.0,-1559.852901,1038.327037,146.35,2.424,1.737
samples(1,10) = 54545.0,1044.695958,-384.373271,339.8,3.838,1.354
samples(1,11) = 66364.0,-1214.067196,-600.293057,206.31,2.444,1.727
samples(1,12) = 63636.0,1025.335367,-797.052804,322.14,3.01,1.606
samples(1,13) = 85455.0,0.0,1743.979592,90.0,2.808,1.919
samples(1,14) = 44545.0,908.95403,15.231096,0.96,3.051,1.303
samples(1,15) = 65455.0,684.3957,-1147.173825,300.82,2.182,1.495
samples(1,16) = 18182.0,366.44205,58.366567,9.05,2.707,1.545
samples(1,17) = 78182.0,-1595.55102,0.0,180.0,2.626,1.141
samples(1,18) = 45455.0,-853.211693,364.101646,156.89,3.677,1.414
samples(1,19) = 40000.0,816.326531,0.0,0.0,2.081,1.152
samples(1,20) = 64545.0,-1293.523558,248.859249,169.11,2.343,1.505
samples(1,21) = 10000.0,-203.018804,-20.800909,185.85,3.232,1.455
samples(1,22) = 59091.0,1109.165816,-473.328135,336.89,3.253,1.646
samples(1,23) = 62727.0,370.42975,-1225.376487,286.82,2.909,1.424
samples(1,24) = 22727.0,-459.9741,59.576943,172.62,2.97,1.525
samples(1,25) = 32727.0,-273.148652,-609.489539,245.86,3.576,1.444
samples(1,26) = 38182.0,574.688283,526.235863,42.48,4.0,1.182
samples(1,27) = 72727.0,-0.0,-1484.22449,270.0,3.859,1.222
samples(1,28) = 15455.0,273.672946,156.797412,29.81,3.596,1.253
samples(1,29) = 35455.0,602.328352,400.944097,33.65,2.242,1.818
samples(1,30) = 90000.0,1646.465669,814.091603,26.31,3.434,1.061
samples(1,31) = 69091.0,1374.378215,315.027099,12.91,3.131,1.384
samples(1,32) = 70909.0,1397.025441,377.469599,15.12,3.879,1.96
samples(1,33) = 53636.0,1056.718563,-285.520307,344.88,2.869,1.02
samples(1,34) = 47273.0,-761.686448,592.103168,142.14,2.545,1.939
samples(1,35) = 12727.0,-175.340483,191.618961,132.46,3.556,1.747
samples(1,36) = 60909.0,508.363468,-1134.335513,294.14,3.899,1.283
samples(1,37) = 61818.0,1257.788671,97.885764,4.45,2.788,1.263
samples(1,38) = 95455.0,-1828.241867,-672.662032,200.2,2.141,1.828
samples(1,39) = 94545.0,1913.506018,247.841865,7.38,3.111,1.0
samples(1,40) = 26364.0,-220.041282,490.988548,114.14,3.758,1.323
samples(1,41) = 82727.0,1552.824634,662.656185,23.11,2.162,1.687
samples(1,42) = 10909.0,185.32788,-123.364805,326.35,2.101,1.616
samples(1,43) = 31818.0,648.347067,36.02121,3.18,2.768,1.293
samples(1,44) = 24545.0,477.629063,150.962543,17.54,2.525,1.131
samples(1,45) = 77273.0,-1563.936227,-202.564751,187.38,3.697,1.485
samples(1,46) = 87273.0,-1778.339103,98.801906,176.82,3.091,1.848
samples(1,47) = 14545.0,-296.795069,-4.973315,180.96,3.798,1.768
samples(1,48) = 51818.0,1044.345735,-166.34247,350.95,2.889,1.677
samples(1,49) = 23636.0,-465.66858,125.821425,164.88,2.667,1.394
samples(1,50) = 29091.0,-532.192586,263.141542,153.69,2.687,1.717
samples(1,51) = 80909.0,252.610837,1631.766737,81.2,3.03,1.232
samples(1,52) = 20000.0,-62.443198,403.358523,98.8,2.586,1.758
samples(1,53) = 37273.0,-633.2135,-421.503013,213.65,2.222,1.788
samples(1,54) = 88182.0,-1767.22433,-339.9939,190.89,2.606,1.657
samples(1,55) = 75455.0,-445.594031,1474.018889,106.82,3.778,1.051
samples(1,56) = 28182.0,-548.402617,-173.331692,197.54,3.071,1.596
samples(1,57) = 40909.0,830.529627,85.09444,5.85,3.394,1.808
samples(1,58) = 41818.0,852.898237,-30.081947,357.98,2.323,1.869
samples(1,59) = 13636.0,277.857207,-15.437338,356.82,2.061,1.576
samples(1,60) = 93636.0,-552.960608,-1829.18604,253.18,2.929,1.949
samples(1,61) = 97273.0,-1464.083948,1340.645883,137.52,2.04,1.091
samples(1,62) = 34545.0,704.901043,-11.811836,359.04,3.273,1.566
samples(1,63) = 17273.0,278.311299,216.347556,37.86,2.505,1.434
samples(1,64) = 96364.0,1950.320947,-252.610222,352.62,3.192,1.899
samples(1,65) = 92727.0,-1804.404566,570.311824,162.46,2.364,1.98
samples(1,66) = 20909.0,-288.064286,-314.807956,227.54,2.404,1.535
samples(1,67) = 36364.0,-742.018281,12.433799,179.04,3.495,1.121
samples(1,68) = 21818.0,-228.128415,382.385433,120.82,3.414,1.879
samples(1,69) = 30000.0,451.538643,-413.469066,317.52,2.263,1.01
samples(1,70) = 76364.0,1462.593494,538.129626,20.2,2.202,1.626
samples(1,71) = 100000.0,-1225.347399,-1632.009507,233.1,2.99,1.707
samples(1,72) = 68182.0,-1389.326788,-77.188954,183.18,3.333,1.212
samples(1,73) = 39091.0,692.212819,-396.594475,330.19,3.636,1.101
samples(1,74) = 84545.0,-1362.231734,-1058.94194,217.86,3.919,1.404
samples(1,75) = 56364.0,-1079.535117,397.191585,159.8,3.313,1.333
samples(1,76) = 50909.0,1038.313558,36.621595,2.02,3.818,1.172
samples(1,77) = 55455.0,-834.669182,-764.297569,222.48,3.374,1.04
samples(1,78) = 48182.0,-978.185204,100.222941,174.15,2.828,1.99
samples(1,79) = 80000.0,-1416.618289,811.633318,150.19,3.737,2.0
samples(1,80) = 90909.0,-1791.058763,-483.93552,195.12,3.212,1.242
samples(1,81) = 60000.0,1220.798477,-95.007051,355.55,2.727,1.071
samples(1,82) = 50000.0,1015.094022,-104.004547,354.15,2.283,1.929
samples(1,83) = 67273.0,1230.696499,-608.515382,333.69,2.646,1.475
samples(1,84) = 30909.0,-622.943424,-99.22188,189.05,2.848,1.778
samples(1,85) = 98182.0,-1203.070583,1602.339574,126.9,2.566,1.97
samples(1,86) = 25455.0,-513.022901,81.713836,170.95,3.475,1.03
samples(1,87) = 33636.0,-351.697101,-589.509415,239.18,2.303,1.343
samples(1,88) = 49091.0,976.532413,-223.835164,347.09,3.293,1.838
samples(1,89) = 86364.0,-1621.092832,-691.789123,203.11,3.717,1.798
samples(1,90) = 79091.0,826.973345,1386.160339,59.18,3.616,1.081
samples(1,91) = 42727.0,588.651908,643.301905,47.54,2.0,1.859
samples(1,92) = 52727.0,726.422382,-793.862886,312.46,2.485,1.162
samples(1,93) = 74545.0,-1516.740374,-118.038343,184.45,2.949,1.192
samples(1,94) = 46364.0,-922.286138,211.401144,167.09,3.515,1.515
samples(1,95) = 71818.0,-1464.762676,-51.662568,182.02,3.535,1.364
samples(1,96) = 83636.0,-1701.71169,132.433495,175.55,2.384,1.273
samples(1,97) = 73636.0,434.852058,1438.484592,73.18,3.152,1.889
samples(1,98) = 19091.0,371.497919,-117.418045,342.46,3.172,1.667
samples(1,99) = 27273.0,334.188996,-445.097953,306.9,2.02,1.697
samples(1,100) = 89091.0,-1817.053825,64.08797,177.98,3.354,1.636

*DO,i,1,100,1
/PREP7  
FLST,3,1,8  
FITEM,3,0,0,0   
K, ,P51X
FLST,3,1,8  
FITEM,3,samples(5,i,1),0,0   
K, ,P51X
FLST,3,1,8  
FITEM,3,samples(5,i,1),samples(6,i,1),0   
K, ,P51X
FLST,3,1,8  
FITEM,3,0,samples(6,i,1),0   
K, ,P51X
FLST,2,4,3  
FITEM,2,1   
FITEM,2,2   
FITEM,2,3   
FITEM,2,4   
A,P51X  

!*  Define element type.
ET,1,PLANE182   
!*  
KEYOPT,1,1,0
KEYOPT,1,3,3
KEYOPT,1,6,0
!*  Define thickness.
R,1,1,  
!*  Define material properties.
MPTEMP,,,,,,,,  
MPTEMP,1,0  
MPDATA,EX,1,,200e9  
MPDATA,PRXY,1,,0.3  

!*  Create the mesh.
FLST,5,2,4,ORDE,2   
FITEM,5,1   
FITEM,5,3   
CM,_Y,LINE  
LSEL, , , ,P51X 
CM,_Y1,LINE 
CMSEL,,_Y   
!*  
LESIZE,_Y1, , ,99, , , , ,1
!*  
FLST,5,2,4,ORDE,2   
FITEM,5,2   
FITEM,5,4   
CM,_Y,LINE  
LSEL, , , ,P51X 
CM,_Y1,LINE 
CMSEL,,_Y   
!*  
LESIZE,_Y1, , ,49, , , , ,1
!*  
MSHAPE,0,2D 
MSHKEY,0
!*  
CM,_Y,AREA  
ASEL, , , ,       1 
CM,_Y1,AREA 
CHKMSH,'AREA'   
CMSEL,S,_Y  
!*  
AMESH,_Y1   
!*  
CMDELE,_Y   
CMDELE,_Y1  
CMDELE,_Y2  

! NPLOT   
! /PNUM,KP,0  
! /PNUM,LINE,0
! /PNUM,AREA,0
! /PNUM,VOLU,0
! /PNUM,NODE,1
! /PNUM,TABN,0
! /PNUM,SVAL,0
! /NUMBER,0   
!*  
! /PNUM,ELEM,0
! /REPLOT 
!*  
! /REPLOT,RESIZE  

!*  Apply displacement boundary condition.
FINISH  
/SOL
FLST,2,1,4,ORDE,1   
FITEM,2,4   
!*  
/GO 
DL,P51X, ,ALL,0 

!* Apply X and Y components of load on free end.
FLST,2,48,1,ORDE,2  
FITEM,2,102 
FITEM,2,-149
!*  
/GO 
F,P51X,FX,samples(2,i,1)  

FLST,2,2,1,ORDE,2   
FITEM,2,2   
FITEM,2,101 
!*  
/GO 
F,P51X,FX,samples(2,i,1)/2

FLST,2,48,1,ORDE,2  
FITEM,2,102 
FITEM,2,-149
!*  
/GO 
F,P51X,FY,samples(3,i,1) 

FLST,2,2,1,ORDE,2   
FITEM,2,2   
FITEM,2,101 
!*  
/GO 
F,P51X,FY,samples(3,i,1)/2


FINISH  
/SOL
! /STATUS,SOLU
SOLVE   
FINISH  
/POST1  
/SHOW,WIN32C
SET,FIRST   
/PLOPTS,INFO,3  
/CONTOUR,ALL,18 
/PNUM,MAT,1 
/NUMBER,1   
/REPLOT,RESIZE  
PLNSOL,S,EQV
/UIS,ABORT,1  
/SHOW,WIN32 
/REPLOT,RESIZE  
!*  
! /DSCALE,ALL,OFF 
! /EFACET,1   
! PLNSOL, S,EQV, 0,1.0
! /EFACET,1   
! PLNSOL, S,EQV, 0,1.0
! /triad,off  
! /REPLOT 
FINISH  

/POST1  
! /SHOW,WIN32C
SET,FIRST   
/DSCALE,ALL,OFF
/PLOPTS,INFO,3  
/PLOPTS,LEG1,0  
/PLOPTS,LEG2,1  
/PLOPTS,LEG3,0  
/PLOPTS,FRAME,0 
/PLOPTS,TITLE,0 
/PLOPTS,MINM,0  
/PLOPTS,FILE,0  
/PLOPTS,SPNO,0  
/PLOPTS,LOGO,1  
/PLOPTS,WINS,1  
/PLOPTS,WP,0
/PLOPTS,DATE,0  
/TRIAD,OFF  
/REPLOT
/REPLOT
!*  

*VGET,stress,NODE,,S,EQV
suffix = '000000'
number = CHRVAL(i)
filename = 'stress_%STRFILL(suffix,number,6-STRLENG(number)+1)%'
*CFOPEN,filename,'txt'
*VWRITE,stress(1)
(F20.5)
*CFCLOS

*ENDDO
